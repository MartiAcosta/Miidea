(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{25:function(e,t,n){"use strict";var r=n(67),o=Object.create(null),s="undefined"==typeof document,a=Array.prototype.forEach;function i(){}function c(e,t){if(!t){if(!e.href)return;t=e.href.split("?")[0]}if(d(t)&&!1!==e.isLoaded&&t&&t.indexOf(".css")>-1){e.visited=!0;var n=e.cloneNode();n.isLoaded=!1,n.addEventListener("load",(function(){n.isLoaded=!0,e.parentNode.removeChild(e)})),n.addEventListener("error",(function(){n.isLoaded=!0,e.parentNode.removeChild(e)})),n.href="".concat(t,"?").concat(Date.now()),e.nextSibling?e.parentNode.insertBefore(n,e.nextSibling):e.parentNode.appendChild(n)}}function l(e){if(!e)return!1;var t=document.querySelectorAll("link"),n=!1;return a.call(t,(function(t){if(t.href){var o=function(e,t){var n;return e=r(e,{stripWWW:!1}),t.some((function(r){e.indexOf(t)>-1&&(n=r)})),n}(t.href,e);d(o)&&!0!==t.visited&&o&&(c(t,o),n=!0)}})),n}function u(){var e=document.querySelectorAll("link");a.call(e,(function(e){!0!==e.visited&&c(e)}))}function d(e){return!!/^https?:/i.test(e)}e.exports=function(e,t){if(s)return console.log("no window.document found, will not HMR CSS"),i;var n,a,c,d=function(e){var t=o[e];if(!t){if(document.currentScript)t=document.currentScript.src;else{var n=document.getElementsByTagName("script"),s=n[n.length-1];s&&(t=s.src)}o[e]=t}return function(e){if(!t)return null;var n=t.split(/([^\\/]+)\.js$/),o=n&&n[1];return o&&e?e.split(",").map((function(e){var n=new RegExp("".concat(o,"\\.js$"),"g");return r(t.replace(n,"".concat(e.replace(/{fileName}/g,o),".css")))})):[t.replace(".js",".css")]}}(e);return n=function(){var e=d(t.filename),n=l(e);if(t.locals)return console.log("[HMR] Detected local css modules. Reload all css"),void u();n?console.log("[HMR] css reload %s",e.join(" ")):(console.log("[HMR] Reload all css"),u())},a=50,c=0,function(){var e=this,t=arguments,r=function(){return n.apply(e,t)};clearTimeout(c),c=setTimeout(r,a)}}},26:function(e,t,n){"use strict";function r(e,t,n,r,o,s,a,i){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):o&&(c=i?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:l}}n.d(t,"a",(function(){return r}))},27:function(e,t){var n,r,o=Object.create(null);"undefined"!=typeof window&&(window.__VUE_HOT_MAP__=o);var s=!1,a="beforeCreate";function i(e,t){if(t.functional){var n=t.render;t.render=function(t,r){var s=o[e].instances;return r&&s.indexOf(r.parent)<0&&s.push(r.parent),n(t,r)}}else c(t,a,(function(){var t=o[e];t.Ctor||(t.Ctor=this.constructor),t.instances.push(this)})),c(t,"beforeDestroy",(function(){var t=o[e].instances;t.splice(t.indexOf(this),1)}))}function c(e,t,n){var r=e[t];e[t]=r?Array.isArray(r)?r.concat(n):[r,n]:[n]}function l(e){return function(t,n){try{e(t,n)}catch(e){console.error(e),console.warn("Something went wrong during Vue component hot-reload. Full reload required.")}}}function u(e,t){for(var n in e)n in t||delete e[n];for(var r in t)e[r]=t[r]}t.install=function(e,o){s||(s=!0,n=e.__esModule?e.default:e,r=n.version.split(".").map(Number),o,n.config._lifecycleHooks.indexOf("init")>-1&&(a="init"),t.compatible=r[0]>=2,t.compatible||console.warn("[HMR] You are using a version of vue-hot-reload-api that is only compatible with Vue.js core ^2.0.0."))},t.createRecord=function(e,t){if(!o[e]){var n=null;"function"==typeof t&&(t=(n=t).options),i(e,t),o[e]={Ctor:n,options:t,instances:[]}}},t.isRecorded=function(e){return void 0!==o[e]},t.rerender=l((function(e,t){var n=o[e];if(t){if("function"==typeof t&&(t=t.options),n.Ctor)n.Ctor.options.render=t.render,n.Ctor.options.staticRenderFns=t.staticRenderFns,n.instances.slice().forEach((function(e){e.$options.render=t.render,e.$options.staticRenderFns=t.staticRenderFns,e._staticTrees&&(e._staticTrees=[]),Array.isArray(n.Ctor.options.cached)&&(n.Ctor.options.cached=[]),Array.isArray(e.$options.cached)&&(e.$options.cached=[]);var r=function(e){if(!e._u)return;var t=e._u;return e._u=function(e){try{return t(e,!0)}catch(n){return t(e,null,!0)}},function(){e._u=t}}(e);e.$forceUpdate(),e.$nextTick(r)}));else if(n.options.render=t.render,n.options.staticRenderFns=t.staticRenderFns,n.options.functional){if(Object.keys(t).length>2)u(n.options,t);else{var r=n.options._injectStyles;if(r){var s=t.render;n.options.render=function(e,t){return r.call(t),s(e,t)}}}n.options._Ctor=null,Array.isArray(n.options.cached)&&(n.options.cached=[]),n.instances.slice().forEach((function(e){e.$forceUpdate()}))}}else n.instances.slice().forEach((function(e){e.$forceUpdate()}))})),t.reload=l((function(e,t){var n=o[e];if(t)if("function"==typeof t&&(t=t.options),i(e,t),n.Ctor){r[1]<2&&(n.Ctor.extendOptions=t);var s=n.Ctor.super.extend(t);s.options._Ctor=n.options._Ctor,n.Ctor.options=s.options,n.Ctor.cid=s.cid,n.Ctor.prototype=s.prototype,s.release&&s.release()}else u(n.options,t);n.instances.slice().forEach((function(e){e.$vnode&&e.$vnode.context?e.$vnode.context.$forceUpdate():console.warn("Root or manually mounted instance modified. Full reload required.")}))}))},28:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer-repentance"},[n("b-link",{directives:[{name:"b-modal",rawName:"v-b-modal",value:"js-footer-repentance-modal",expression:"'js-footer-repentance-modal'"}]},[n("div",{staticClass:"d-flex align-items-center footer-repentance__content"},[n("img",{attrs:{src:e.image}}),e._v(" "),n("div",{staticClass:"d-flex flex-column footer-repentance__content-text"},[n("div",[e._v(e._s(e.textTop))]),e._v(" "),n("div",{staticClass:"mus-fo-info-lead"},[e._v(e._s(e.textBottom))])])])]),e._v(" "),n("b-modal",{ref:"v-footer-repentance-modal",attrs:{"hide-footer":e.hideFooter,id:"js-footer-repentance-modal",lazy:"",scrollable:"",size:"lg",static:"",title:"¿Te arrepentiste de tu compra?"},on:{hidden:e.hiddenModal},scopedSlots:e._u([{key:"modal-header-close",fn:function(){return[n("font-awesome-icon",{staticClass:"close__icon",attrs:{icon:["fas","times"]}})]},proxy:!0},{key:"modal-footer",fn:function(t){var r=t.cancel;return[n("div",{class:[{"justify-content-end":"large"===e.$mq},"m-0 d-flex align-items-center w-100"]},[n("b-button",{staticClass:"text-uppercase",attrs:{block:"large"!==e.$mq,variant:"outline-primary"},on:{click:function(e){return r()}}},[e._v("\n          Cancelar\n        ")]),e._v(" "),n("b-button",{staticClass:"mt-0 ml-2 text-uppercase d-flex align-items-center justify-content-center",attrs:{block:"large"!==e.$mq,disabled:e.submitDisabled,variant:"primary"},on:{click:e.submitFormFields}},[e.spinnerLoading?[n("b-spinner",{staticClass:"mr-2",attrs:{small:"",variant:"light"}}),e._v("\n            Enviando...\n          ")]:[e._v("Enviar")]],2)],1)]}}])},[e._v(" "),e.showCreateRepentance?e._e():n("search-repentance",{ref:"v-footer-repentance-search",attrs:{"resource-path":e.resourcePath},on:{"on-close-modal":e.closeModal,"on-create-repentance":e.onCreateRepentance,"on-form-success":e.onFormSuccess,"on-search-form-empty":e.onSearchFormEmpty,"on-set-spinner":e.onSetSpinner}}),e._v(" "),e.showCreateRepentance?n("create-repentance",{ref:"v-footer-repentance-create",attrs:{"resource-path":e.resourcePath},on:{"on-close-modal":e.closeModal,"on-form-success":e.onFormSuccess,"on-hide-create-repentance":e.onHideCreateRepentance,"on-sales-channel-selected":e.onSalesChannelSelected,"on-set-spinner":e.onSetSpinner}}):e._e()],1)],1)},o=[];r._withStripped=!0},29:function(e,t,n){"use strict";var r=n(47),o={name:"footer-repentance",props:["image","resource-path","text-bottom","text-top"],components:{createRepentance:n(68).a,searchRepentance:r.a},data:function(){return{hideFooter:!1,searchFormEmpty:!0,showCreateRepentance:!0,spinnerColor:"#ffffff",spinnerLoading:!1,webOrPhysicalSelected:!1}},methods:{closeModal:function(){this.$bvModal.hide("js-footer-repentance-modal")},hiddenModal:function(){this.searchFormEmpty=!0,this.showCreateRepentance=!0,this.webOrPhysicalSelected=!1,this.hideFooter=!1,this.spinnerLoading=!1},onCreateRepentance:function(){this.showCreateRepentance=!0},onHideCreateRepentance:function(){this.searchFormEmpty=!0,this.showCreateRepentance=!1},submitFormFields:function(){this.spinnerLoading=!0,this.showCreateRepentance?this.$refs["v-footer-repentance-create"].submitForm():this.$refs["v-footer-repentance-search"].submitForm()},onSetSpinner:function(e){this.spinnerLoading=e},onFormSuccess:function(e){this.hideFooter=e},onSalesChannelSelected:function(e){this.webOrPhysicalSelected=e},onSearchFormEmpty:function(e){this.searchFormEmpty=e}},computed:{submitDisabled:function(){return this.spinnerLoading||this.showCreateRepentance&&!this.webOrPhysicalSelected||!this.showCreateRepentance&&this.searchFormEmpty}}};t.a=o},30:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer-repentance-search"},[n("div",{class:[e.repentanceResults.length||!e.repentanceResults.length&&"large"===e.$mq?"flex-row":"flex-column","mb-3 mb-lg-4 d-flex align-items-lg-center justify-content-lg-between"]},[n("p",{class:[{"order-1 order-lg-0":!e.repentanceResults.length},"m-0"]},[e._v("\n      Consultá el estado de tu arrepentimiento\n    ")]),e._v(" "),e.repentanceResults.length||e.emptyResults?e._e():[n("b-button",{staticClass:"mb-3 mb-lg-0 order-0 order-lg-1 text-uppercase",attrs:{block:"large"!==e.$mq,disabled:e.formBusy,variant:"outline-primary"},on:{click:e.createNewRepentance}},[e._v("\n        Nuevo arrepentimiento\n      ")])]],2),e._v(" "),e.formAlertError?n("div",{staticClass:"mt-0 alert alert-danger shadow"},[n("font-awesome-icon",{staticClass:"alert-icon mr-1",attrs:{icon:["fas","exclamation-triangle"]}}),e._v("\n    "+e._s(e.formAlertErrorMessage)+"\n  ")],1):e._e(),e._v(" "),e.repentanceResults.length?[n("ul",{staticClass:"mb-3 mb-lg-4 footer-repentance-search__results"},e._l(e.repentanceResults,(function(t,r){return n("li",{key:r,staticClass:"flex-column",on:{click:function(t){return e.collapseRepentance(r)}}},[n("div",{staticClass:"d-flex align-items-start justify-content-between"},[n("div",{staticClass:"mr-3"},[n("div",{staticClass:"mb-3 footer-repentance-search__title"},[e._v(e._s(t.repentanceCode))]),e._v(" "),n("div",{class:[{"mb-3":t.statuses.length}]},[e._v(e._s(t.date))]),e._v(" "),t.statuses.length?n("div",{class:[{"d-flex flex-column":"large"!==e.$mq}]},[e._v("\n              Último comentario"),"large"===e.$mq?[e._v(":")]:e._e(),e._v(" "),n("strong",{class:[{"mt-1":"large"!==e.$mq}]},[e._v(e._s(t.statuses[0].detail))])],2):e._e()]),e._v(" "),n("font-awesome-icon",{class:[{"footer-repentance-search__icon--rotated":t.collapseVisible},"fa-lg d-flex align-items-center justify-content-center footer-repentance-search__icon"],attrs:{icon:["fas","chevron-down"]}})],1),e._v(" "),n("b-collapse",{model:{value:t.collapseVisible,callback:function(n){e.$set(t,"collapseVisible",n)},expression:"repentance.collapseVisible"}},[n("div",{staticClass:"mt-3"},[n("ul",{staticClass:"d-flex flex-column flex-lg-row footer-repentance-search__fields"},[n("li",{staticClass:"d-flex flex-column"},[e._v("\n                "+e._s("WEB"!==t.source?"Factura":"Número de pedido")+"\n                "),n("strong",{staticClass:"mt-1"},[e._v(e._s(t.billNumber))])]),e._v(" "),n("li",{staticClass:"d-flex flex-column"},[e._v("\n                Canal de venta\n                "),n("strong",{staticClass:"mt-1"},[e._v(e._s("WEB"!==t.source?"Otros canales":"Web"))])]),e._v(" "),n("li",{staticClass:"d-flex flex-column"},[e._v("\n                DNI\n                "),n("strong",{staticClass:"mt-1"},[e._v(e._s(t.dni?t.dni:"N/D"))])]),e._v(" "),n("li",{staticClass:"d-flex flex-column"},[e._v("\n                Motivo\n                "),n("strong",{staticClass:"mt-1"},[e._v(e._s(t.reason.detail))])])]),e._v(" "),t.statuses.length?[n("div",{staticClass:"mt-3 mb-2"},[e._v("Comentarios anteriores ("+e._s(t.statuses.length)+")")]),e._v(" "),n("ul",{staticClass:"footer-repentance-search__events"},e._l(t.statuses,(function(t,r){return n("li",{key:r,staticClass:"flex-column"},[n("strong",{staticClass:"footer-repentance-search__events-status"},[e._v(e._s(t.status))]),e._v(" "),n("div",{staticClass:"footer-repentance-search__events-detail"},[n("strong",[e._v(e._s(t.detail))])])])})),0)]:e._e()],2)])],1)})),0),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{staticClass:"text-uppercase",attrs:{block:"large"!==e.$mq,variant:"outline-primary"},on:{click:e.closeModal}},[e._v("\n        Cerrar\n      ")])],1)]:[n("ValidationObserver",{ref:"v-submit-form",attrs:{tag:"div"}},[n("b-form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[n("b-form-group",[n("label",[e._v("Número de gestión")]),e._v(" "),n("b-form-input",{attrs:{disabled:e.formBusy,name:"name"},model:{value:e.repentanceForm.repentanceCode,callback:function(t){e.$set(e.repentanceForm,"repentanceCode",t)},expression:"repentanceForm.repentanceCode"}})],1),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6"},[n("b-form-group",[n("label",[e._v("Tipo de documento")]),e._v(" "),n("b-form-select",{attrs:{disabled:e.formBusy,options:e.fieldOptions.tipoDni,name:"dniType"},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("-- Seleccione una opción --")])]},proxy:!0}],null,!1,1042326147),model:{value:e.repentanceForm.dniType,callback:function(t){e.$set(e.repentanceForm,"dniType",t)},expression:"repentanceForm.dniType"}})],1)],1),e._v(" "),n("div",{staticClass:"col-lg-6"},[n("ValidationProvider",{attrs:{rules:{dni:!0,required:""!==e.repentanceForm.dniType},name:"dni"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("b-form-group",[n("label",[e._v("Documento")]),e._v(" "),n("b-form-input",{attrs:{disabled:e.formBusy,state:!r[0]&&null,name:"dni"},model:{value:e.repentanceForm.dni,callback:function(t){e.$set(e.repentanceForm,"dni",t)},expression:"repentanceForm.dni"}}),e._v(" "),n("b-form-invalid-feedback",{class:[r.length?"d-block":"d-none"]},[e._v("\n                  "+e._s(r[0])+"\n                ")])],1)]}}],null,!1,2667839993)})],1)]),e._v(" "),n("b-form-group",{staticClass:"mb-0"},[n("label",[e._v("\n            Número de pedido o Factura\n            "),n("font-awesome-icon",{staticClass:"footer-repentance__icon",attrs:{icon:["fas","question-circle"],id:"js-bill-number-reference"}}),e._v(" "),n("b-tooltip",{attrs:{triggers:"large"===e.$mq?"hover":"click",target:"js-bill-number-reference"}},[n("img",{staticClass:"rounded",attrs:{height:"large"===e.$mq?140:100,src:e.resourcePath+"/images/v/bill-number-reference.jpg",width:"large"===e.$mq?420:300}})])],1),e._v(" "),n("b-form-input",{attrs:{disabled:e.formBusy,name:"billNumber"},model:{value:e.repentanceForm.billNumber,callback:function(t){e.$set(e.repentanceForm,"billNumber",t)},expression:"repentanceForm.billNumber"}})],1)],1)],1),e._v(" "),e.emptyResults?n("div",{staticClass:"mt-3 mt-lg-4 text-center"},[n("p",[e._v("Lo sentimos no se han encontrado resultados.")]),e._v(" "),n("img",{attrs:{src:e.resourcePath+"/images/v/illustration-empty-results.svg",width:"300"}})]):e._e()]],2)},o=[];r._withStripped=!0},31:function(e,t,n){"use strict";var r=n(24);n(43);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(34),i={name:"search-repentance",props:["resource-path"],components:{ValidationObserver:r.a,ValidationProvider:r.b},data:function(){return{emptyResults:!1,formAlertError:!1,formAlertErrorMessage:null,formBusy:!1,repentanceForm:{billNumber:"",dni:"",dniType:"",repentanceCode:""},repentanceResults:[]}},methods:{createNewRepentance:function(){this.$emit("on-create-repentance")},submitForm:function(){var e=this;this.$refs["v-submit-form"].validate().then((function(t){if(t)e.formBusy=!0,e.$emit("on-set-spinner",!0),a({method:"post",url:"/repentance/getRepentanceStatus",data:e.repentanceForm,params:{CSRFToken:e.$root.token}}).then((function(t){e.formBusy=!1,e.$emit("on-set-spinner",!1),t.data.error?(e.formAlertError=!0,e.formAlertErrorMessage=t.data.error,e.$scrollTo(e.$refs["v-submit-form"],300,{container:e.$parent.$refs.body})):(e.formAlertError=!1,t.data.result.length?(e.emptyResults=!1,e.repentanceResults=t.data.result,e.$emit("on-form-success",!0)):e.emptyResults=!0)}));else{e.$emit("on-set-spinner",!1);var n=Object.entries(e.$refs["v-submit-form"].refs).map((function(e){var t=o(e,2);return{key:t[0],value:t[1]}})).filter((function(e){return!!(e&&e.value&&e.value.failedRules)&&Object.keys(e.value.failedRules).length>0}));n&&n.length>0&&e.$scrollTo(e.$refs["v-submit-form"].refs[n[0].key].$el,300,{container:e.$parent.$refs.body,offset:"large"===e.$mq?-108:-16})}}))},collapseRepentance:function(e){this.repentanceResults.map((function(t,n){e===n&&(t.collapseVisible=!t.collapseVisible)}))},closeModal:function(){this.$emit("on-close-modal")}},computed:{fieldOptions:function(){return{tipoDni:[{text:"DNI",value:"DNI"},{text:"CI",value:"CI"},{text:"LE",value:"LE"},{text:"LC",value:"LC"}]}}},watch:{repentanceForm:{handler:function(e){!Object.values(e).some((function(e){return""!==e}))?this.$emit("on-search-form-empty",!0):this.$emit("on-search-form-empty",!1)},deep:!0}}};t.a=i},32:function(e,t,n){"use strict";n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return o}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer-repentance-create"},[e.repentanceForm.webOrPhysical?[e.formAlertSuccess?[n("div",{staticClass:"mb-3 mb-lg-4 d-flex flex-column flex-lg-row align-items-center"},[n("div",[n("div",{staticClass:"mb-3 mb-lg-4"},[n("p",[e._v("Este es tu número de gestión, conservalo para poder consultar el estado.")]),e._v(" "),n("div",{staticClass:"d-flex align-items-center"},[n("div",{staticClass:"footer-repentance-create__code"},[e._v(e._s(e.repentanceCodeGenerated))]),e._v(" "),n("b-form-input",{ref:"v-footer-repentance-create-code",staticClass:"footer-repentance-create__hidden",attrs:{value:e.repentanceCodeGenerated}}),e._v(" "),n("b-link",{on:{click:e.copyRepentanceCode}},[n("font-awesome-icon",{staticClass:"ml-2",attrs:{icon:["far","copy"],id:"js-copy-repentance-code-tooltip"}})],1),e._v(" "),n("b-tooltip",{attrs:{target:"js-copy-repentance-code-tooltip",triggers:"hover"}},[e.repentanceCodeCopied?[e._v("Copiado!")]:[e._v("Copiar")]],2)],1)]),e._v(" "),n("p",[e._v("Recibimos los siguientes datos.")]),e._v(" "),n("ul",{staticClass:"mb-0 footer-repentance-create__list"},[n("li",["WEB"===e.repentanceForm.webOrPhysical?n("div",[e._v("Canal: "),n("strong",[e._v("Web")])]):n("div",[e._v("Canal: "),n("strong",[e._v("Otros canales")])])]),e._v(" "),e.userEmail&&"WEB"===e.repentanceForm.webOrPhysical?n("li",[n("div",[e._v("\n                Email: "),n("strong",[e._v(e._s(e.userEmail))])])]):e._e(),e._v(" "),e._l(e.repentanceFields,(function(t,r){return n("li",{key:r},[e._l(e.repentanceForm,(function(r,o,s){return[e.filterFields(t,o,r)?[n("div",{key:s},[e._v("\n                    "+e._s(t.label)+": "),n("strong",[e._v(e._s(r))])])]:e._e()]})),e._v(" "),"reasonCode"===t.id?[e._v("\n                "+e._s(t.label)+": "),n("strong",[e._v(e._s(e.reasonCodeSubmitted))])]:e._e()],2)}))],2)]),e._v(" "),n("img",{staticClass:"ml-lg-4",attrs:{src:e.resourcePath+"/images/v/illustration-success.svg",width:"300"}})]),e._v(" "),n("div",{staticClass:"text-center"},[n("b-button",{staticClass:"text-uppercase",attrs:{block:"large"!==e.$mq,variant:"outline-primary"},on:{click:e.closeModal}},[e._v("\n          Cerrar\n        ")])],1)]:e._e(),e._v(" "),e.formAlertError?n("div",{staticClass:"mt-0 alert alert-danger shadow"},[n("font-awesome-icon",{staticClass:"alert-icon mr-1",attrs:{icon:["fas","exclamation-triangle"]}}),e._v("\n      "+e._s(e.formAlertErrorMessage)+"\n    ")],1):e._e(),e._v(" "),e.formAlertSuccess?e._e():n("ValidationObserver",{ref:"v-submit-form",attrs:{tag:"div"}},[n("div",{staticClass:"mb-4 d-flex align-items-center justify-content-between"},[n("p",{staticClass:"m-0"},[e._v("Completa el siguiente formulario")]),e._v(" "),n("b-link",{staticClass:"d-flex flex-row align-items-center footer-repentance__back-btn",attrs:{disabled:e.formBusy},on:{click:e.resetForm}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["fas","angle-left"]}}),e._v("\n          Volver\n        ")],1)],1),e._v(" "),n("b-form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[n("b-form-group",[n("b-form-input",{staticClass:"mw-100",attrs:{value:"WEB"===e.repentanceForm.webOrPhysical?"Compra en la web":"Compra en otros canales",disabled:"",name:"webOrPhysical"}})],1),e._v(" "),e._l(Math.ceil(e.repentanceFields.length/2),(function(t){return n("div",{key:t,staticClass:"row"},e._l(e.repentanceFields.slice(2*(t-1),2*t),(function(r,o){return n("div",{key:o,class:["WEB"===e.repentanceForm.webOrPhysical?"col-lg-12":"col-lg-6"]},[e.fieldVisible(r.id)?n("ValidationProvider",{key:t,attrs:{name:r.id,rules:r.rules,tag:"div"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[n("b-form-group",[n("label",{class:[{"d-flex align-items-center":"reasonCode"===r.id||"billNumber"===r.id}]},[e._v("\n                  "+e._s(r.label)+"\n                  "),"reasonCode"===r.id&&e.spinnerLoading?n("b-spinner",{staticClass:"ml-2",attrs:{small:"",variant:"pink"}}):e._e(),e._v(" "),"WEB"!==e.repentanceForm.webOrPhysical?["billNumber"===r.id?n("font-awesome-icon",{staticClass:"footer-repentance-create__icon",attrs:{icon:["fas","question-circle"],id:"js-bill-number-reference"}}):e._e(),e._v(" "),n("b-tooltip",{attrs:{triggers:"large"===e.$mq?"hover":"click",target:"js-bill-number-reference"}},[n("img",{staticClass:"rounded",attrs:{height:"large"===e.$mq?140:100,src:e.resourcePath+"/images/v/bill-number-reference.jpg",width:"large"===e.$mq?420:300}})])]:e._e()],2),e._v(" "),"input"===r.type?n("b-form-input",{staticClass:"mw-100",attrs:{disabled:e.formBusy,name:r.id,state:!o[0]&&null},model:{value:e.repentanceForm[r.id],callback:function(t){e.$set(e.repentanceForm,r.id,t)},expression:"repentanceForm[field.id]"}}):e._e(),e._v(" "),"select"===r.type?n("b-form-select",{staticClass:"mw-100",attrs:{disabled:"reasonCode"===r.id&&e.spinnerLoading||e.formBusy,name:r.id,options:e.fieldOptions[r.id],state:!o[0]&&null},scopedSlots:e._u([{key:"first",fn:function(){return[n("b-form-select-option",{attrs:{disabled:"",value:""}},[e._v("-- Seleccione una opción --")])]},proxy:!0}],null,!0),model:{value:e.repentanceForm[r.id],callback:function(t){e.$set(e.repentanceForm,r.id,t)},expression:"repentanceForm[field.id]"}}):e._e(),e._v(" "),n("b-form-invalid-feedback",{class:[o.length?"d-block":"d-none"]},[e._v("\n                  "+e._s(o[0])+"\n                ")])],1)]}}],null,!0)}):e._e()],1)})),0)}))],2)],1)]:[n("div",{staticClass:"text-center"},[n("div",{staticClass:"mb-4 d-flex align-items-center justify-content-between"},[n("p",{staticClass:"m-0"},[e._v("¿En dónde realizaste la compra?")]),e._v(" "),n("b-link",{staticClass:"d-flex flex-row align-items-center footer-repentance__back-btn",on:{click:e.hideCreateRepentance}},[n("font-awesome-icon",{staticClass:"mr-1",attrs:{icon:["fas","angle-left"]}}),e._v("\n          Volver\n        ")],1)],1),e._v(" "),n("b-form-group",{staticClass:"footer-repentance-create__options"},[n("b-form-radio-group",{attrs:{stacked:"large"!==e.$mq,name:"webOrPhysical"},on:{input:e.salesChannelSelected},model:{value:e.repentanceForm.webOrPhysical,callback:function(t){e.$set(e.repentanceForm,"webOrPhysical",t)},expression:"repentanceForm.webOrPhysical"}},[n("b-form-radio",{attrs:{value:"WEB"}},[n("img",{attrs:{src:e.resourcePath+"/images/v/web.svg",height:"48"}}),e._v(" "),n("div",{staticClass:"footer-repentance-create__options-title"},[e._v("Web")])]),e._v(" "),n("b-form-radio",{attrs:{value:"PHYSICAL"}},[n("img",{attrs:{src:e.resourcePath+"/images/v/store.svg",height:"48"}}),e._v(" "),n("div",{staticClass:"d-flex align-items-end footer-repentance-create__options-title"},[e._v("\n              Otros "),n("br"),e._v("\n              canales\n              "),"large"===e.$mq?[n("font-awesome-icon",{staticClass:"footer-repentance-create__icon",attrs:{icon:["fas","info-circle"],id:"js-other-channels-tooltip"}}),e._v(" "),n("b-tooltip",{attrs:{target:"js-other-channels-tooltip",triggers:"hover"}},[e._v("\n                  Tienda, teléfono o Whatsapp\n                ")])]:e._e()],2)])],1)],1)],1)]],2)},o=[];r._withStripped=!0},33:function(e,t,n){"use strict";var r=n(24);n(43);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(34),i={name:"create-repentance",props:["resource-path"],components:{ValidationObserver:r.a,ValidationProvider:r.b},data:function(){return{formAlertError:!1,formAlertErrorMessage:null,formAlertSuccess:!1,formBusy:!1,repentanceCodeCopied:!1,repentanceCodeGenerated:null,repentanceForm:{billNumber:"",billType:"",dni:"",email:"",name:"",phone:"",pointOfService:"",reasonCode:"",surname:"",tipoDni:"",webOrPhysical:null},repentanceReasons:null,spinnerColor:"#f8708d",spinnerLoading:!1,userEmail:null}},methods:{submitForm:function(){var e=this;this.$refs["v-submit-form"].validate().then((function(t){if(t)e.formBusy=!0,e.$emit("on-set-spinner",!0),a({method:"post",url:"/repentance/createRepentance",data:e.repentanceForm,params:{CSRFToken:e.$root.token}}).then((function(t){e.formBusy=!1,e.$emit("on-set-spinner",!1),t.data.error?(e.formAlertError=!0,e.formAlertErrorMessage=t.data.error,e.$scrollTo(e.$refs["v-submit-form"],300,{container:e.$parent.$refs.body})):(e.formAlertSuccess=!0,e.repentanceCodeGenerated=t.data.repentanceCode,e.userEmail=t.data.email,e.$emit("on-form-success",!0))}));else{e.$emit("on-set-spinner",!1);var n=Object.entries(e.$refs["v-submit-form"].refs).map((function(e){var t=o(e,2);return{key:t[0],value:t[1]}})).filter((function(e){return!!(e&&e.value&&e.value.failedRules)&&Object.keys(e.value.failedRules).length>0}));n&&n.length>0&&e.$scrollTo(e.$refs["v-submit-form"].refs[n[0].key].$el,300,{container:e.$parent.$refs.body,offset:"large"===e.$mq?-108:-16})}}))},resetForm:function(){var e=this;Object.keys(this.repentanceForm).forEach((function(t){"webOrPhysical"!==t&&(e.repentanceForm[t]=""),e.repentanceForm.webOrPhysical=null})),this.$emit("on-sales-channel-selected",!1),this.$emit("on-set-spinner",!1),this.formAlertSuccess=!1,this.formAlertError=!1},getRepentanceReasons:function(){var e=this;this.repentanceReasons||(this.spinnerLoading=!0,a({method:"get",url:"/repentance/getAllRepentanceReasons",params:{CSRFToken:this.$root.token}}).then((function(t){e.spinnerLoading=!1;var n=t.data;e.repentanceReasons=n.map((function(e){return{text:e.detail,value:e.code}}))})))},fieldVisible:function(e){return"dni"===e||"billNumber"===e||"reasonCode"===e||"WEB"!==this.repentanceForm.webOrPhysical},copyRepentanceCode:function(){var e=this;this.repentanceCodeCopied=!0,this.$refs["v-footer-repentance-create-code"].select(),document.execCommand("copy"),setTimeout((function(){return e.repentanceCodeCopied=!1}),1500)},filterFields:function(e,t,n){return e.id===t&&"webOrPhysical"!==e.id&&"reasonCode"!==e.id&&""!==n},closeModal:function(){this.$emit("on-close-modal")},salesChannelSelected:function(){this.$emit("on-sales-channel-selected",!0)},hideCreateRepentance:function(){this.$emit("on-hide-create-repentance")}},computed:{fieldOptions:function(){return{reasonCode:this.repentanceReasons,tipoDni:[{text:"DNI",value:"DNI"},{text:"CI",value:"CI"},{text:"LE",value:"LE"},{text:"LC",value:"LC"}]}},repentanceFields:function(){return[{id:"name",label:"Nombre",rules:{required:!0},type:"input"},{id:"surname",label:"Apellido",rules:{required:!0},type:"input"},{id:"email",label:"E-mail",rules:{email:!0,required:!0},type:"input"},{id:"phone",label:"Teléfono",rules:{phone:!0,required:!0},type:"input"},{id:"tipoDni",label:"Tipo de documento",rules:{required:!0},type:"select"},{id:"dni",label:"Documento",rules:{dni:!0,required:!0},type:"input"},{id:"billType",label:"Tipo de factura",rules:{required:!0},type:"input"},{id:"pointOfService",label:"Punto de venta",rules:{max:"4",numeric:!0,required:!0},type:"input"},{id:"billNumber",label:"WEB"===this.repentanceForm.webOrPhysical?"Número de pedido":"Factura",rules:{max:"WEB"===this.repentanceForm.webOrPhysical?"32":"8",numeric:"WEB"!==this.repentanceForm.webOrPhysical,required:!0},type:"input"},{id:"reasonCode",label:"Motivo de arrepentimiento",rules:{required:!0},type:"select"}]},reasonCodeSubmitted:function(){var e,t=this;return this.repentanceReasons.map((function(n){n.value===t.repentanceForm.reasonCode&&(e=n.text)})),e}},mounted:function(){this.getRepentanceReasons()}};t.a=i},43:function(e,t,n){"use strict";var r=n(65),o=n(24);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(o.c)("dni",{validate:function(e){return null!==e.match(/^\d{7,8}$/)},message:"El formato del campo es inválido."}),Object(o.c)("email",a(a({},r.a),{},{message:"El campo e-mail debe ser un correo electrónico válido."})),Object(o.c)("max",a(a({},r.b),{},{message:"La longitud del campo no puede superar los {length} caracteres."})),Object(o.c)("numeric",a(a({},r.c),{},{message:"El campo sólo puede contener números."})),Object(o.c)("phone",{validate:function(e){return null!==e.match(/^[\d+-]+$/)},message:"El formato del campo es inválido."}),Object(o.c)("required",a(a({},r.d),{},{message:"El campo es obligatorio."}))},47:function(e,t,n){"use strict";var r=n(30),o=n(31),s=(n(66),n(26)),a=Object(s.a)(o.a,r.render,r.staticRenderFns,!1,null,null,null),i=n(27);i.install(n(1)),i.compatible&&(e.hot.accept(),i.isRecorded("f83e25fc")?i.reload("f83e25fc",a.options):i.createRecord("f83e25fc",a.options),e.hot.accept(30,function(e){r=n(30),i.rerender("f83e25fc",{render:r.render,staticRenderFns:r.staticRenderFns})}.bind(this))),a.options.__file="web/webroot/_ui/desktop/theme-musimundo/src/js/components/footer-repentance/components/search.vue",t.a=a.exports},67:function(e,t,n){"use strict";e.exports=function(e){if(e=e.trim(),/^data:/i.test(e))return e;var t=-1!==e.indexOf("//")?e.split("//")[0]+"//":"",n=e.replace(new RegExp(t,"i"),"").split("/"),r=n[0].toLowerCase().replace(/\.$/,"");return n[0]="",t+r+n.reduce((function(e,t){switch(t){case"..":e.pop();break;case".":break;default:e.push(t)}return e}),[]).join("/")}},68:function(e,t,n){"use strict";var r=n(32),o=n(33),s=(n(69),n(26)),a=Object(s.a)(o.a,r.render,r.staticRenderFns,!1,null,null,null),i=n(27);i.install(n(1)),i.compatible&&(e.hot.accept(),i.isRecorded("00534354")?i.reload("00534354",a.options):i.createRecord("00534354",a.options),e.hot.accept(32,function(e){r=n(32),i.rerender("00534354",{render:r.render,staticRenderFns:r.staticRenderFns})}.bind(this))),a.options.__file="web/webroot/_ui/desktop/theme-musimundo/src/js/components/footer-repentance/components/create.vue",t.a=a.exports},71:function(e,t,n){"use strict";n.r(t);var r=n(28),o=n(29),s=(n(70),n(26)),a=Object(s.a)(o.a,r.render,r.staticRenderFns,!1,null,null,null),i=n(27);i.install(n(1)),i.compatible&&(e.hot.accept(),i.isRecorded("04b04830")?i.reload("04b04830",a.options):i.createRecord("04b04830",a.options),e.hot.accept(28,function(e){r=n(28),i.rerender("04b04830",{render:r.render,staticRenderFns:r.staticRenderFns})}.bind(this))),a.options.__file="web/webroot/_ui/desktop/theme-musimundo/src/js/components/footer-repentance/footer-repentance.vue",t.default=a.exports}}]);